<app-layout>
  <main class="home">
    <h1>Descubre nuevas series</h1>

    
    <div class="filter-bar card shadow-sm p-3 mb-4 d-flex flex-wrap align-items-center gap-3">
     
      <input
        type="text"
        class="form-control w-auto flex-grow-1"
        placeholder="Buscar serie..."
        [(ngModel)]="filtros.query"
        (input)="buscarSeries(true)"
      />

      
      <select class="form-select w-auto" [(ngModel)]="filtros.genero" (change)="buscarSeries(true)">
        <option value="">Todos los géneros</option>
        <option *ngFor="let g of generos" [value]="g.id">{{ g.name }}</option>
      </select>

     
      <select class="form-select w-auto" [(ngModel)]="filtros.idioma" (change)="buscarSeries(true)">
        <option value="">Todos los idiomas</option>
        <option *ngFor="let lang of idiomas" [value]="lang.iso">{{ lang.name }}</option>
      </select>

      
      <select class="form-select w-auto" [(ngModel)]="filtros.plataforma" (change)="buscarSeries(true)">
        <option value="">Todas las plataformas</option>
        <option *ngFor="let p of plataformas" [value]="p.provider_id">{{ p.provider_name }}</option>
      </select>
    </div>

   
    <div class="series-list">
      <div *ngFor="let serie of series" class="serie-card" [routerLink]="['/serie', serie.id]">
        <img
          [src]="'https://image.tmdb.org/t/p/w300' + serie.poster_path"
          alt="{{ serie.name }}"
        />
        <h3>{{ serie.name }}</h3>
        <p class="mb-1"><strong>Año:</strong> {{ serie.first_air_date | date:'yyyy' }}</p>
        <p><strong>Puntuación:</strong> {{ serie.vote_average }}/10</p>
      </div>
    </div>

    <div *ngIf="loading" class="loading">
      <p>Cargando series...</p>
    </div>
  </main>
</app-layout>