<app-layout>
  <div class="homePerfil">
    <main class="perfil-container py-4" *ngIf="!loading && usuario">
      <div class="perfil-header card shadow-sm p-3 mb-4 d-flex align-items-center gap-4">
        <img [src]="usuario.fotoPerfil || 'recursos/ğŸš¬.jpg'" class="avatar-marcado propio-avatar" alt="Avatar" />
        <div class="flex-grow-1">
          <h2 class="nombre-usuario mb-1">{{ usuario.username }}</h2>
          <p class="text-muted mb-2">{{ usuario.seguidores?.length || 0 }} Seguidores</p>
          
          <button
            class="btn btn-sm"
            [ngClass]="siguiendo ? 'btn-primary' : 'btn-primary'"
            (click)="toggleSeguir()">
            {{ siguiendo ? 'Dejar de seguir' : 'Seguir' }}
          </button>
        </div>
      </div>

      <app-favoritas-perfil [usuario]="usuario" [esMiPerfil]="false"></app-favoritas-perfil>
      <app-listas-publicas-perfil [usuario]="usuario" [esMiPerfil]="false"></app-listas-publicas-perfil>
      <app-actividad-perfil [usuario]="usuario"></app-actividad-perfil>
    </main>

    <div *ngIf="loading" class="text-center">Cargando perfil...</div>
  </div>

 
<!-- Modal de confirmaciÃ³n -->
<div class="modal-backdrop" *ngIf="modalVisible">
  <div class="modal-card shadow p-4">
    <h5>Â¿EstÃ¡s seguro de dejar de seguir a {{ usuarioADejarSeguir?.username }}?</h5>
    <div class="modal-actions mt-3 d-flex justify-content-end gap-2">
      <button class="btn btn-secondary" (click)="cancelarDejarSeguir()">Cancelar</button>
      <button class="btn btn-danger" (click)="confirmarDejarSeguir()">Dejar de seguir</button>
    </div>
  </div>
</div>

</app-layout>